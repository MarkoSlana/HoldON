<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:HoldON.ViewModels"
             x:Class="HoldON.Views.ProfilePage"
             BackgroundColor="{StaticResource Background}">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">
            <!-- Header -->
            <Grid ColumnDefinitions="*, Auto">
                <Label Grid.Column="0" Text="{Binding Lang.Profile}" TextColor="{StaticResource White}" FontSize="28" FontAttributes="Bold"/>
                <Label Grid.Column="1" Text="âš™" FontSize="24" TextColor="{StaticResource White}"/>
            </Grid>

            <!-- Profile Card -->
            <Frame BackgroundColor="{StaticResource Primary}" CornerRadius="20" Padding="20" HasShadow="False" BorderColor="Transparent">
                <VerticalStackLayout Spacing="15">
                    <Grid ColumnDefinitions="Auto, *">
                        <Frame Grid.Column="0"
                               HeightRequest="60"
                               WidthRequest="60"
                               CornerRadius="30"
                               Padding="0"
                               IsClippedToBounds="True"
                               BackgroundColor="{StaticResource White}"
                               BorderColor="Transparent"
                               HasShadow="False">
                            <Label Text="M" TextColor="{StaticResource Primary}" FontSize="28" FontAttributes="Bold" HorizontalOptions="Center" VerticalOptions="Center"/>
                        </Frame>
                        <VerticalStackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center" Margin="15,0,0,0">
                            <Label Text="Marko" TextColor="{StaticResource White}" FontSize="22" FontAttributes="Bold"/>
                            <Label Text="ÄŒlan od Jan 2024" TextColor="#A0C4FF" FontSize="12"/>
                        </VerticalStackLayout>
                    </Grid>

                    <Button Text="{Binding Lang.EditProfile}"
                            BackgroundColor="{StaticResource White}"
                            TextColor="{StaticResource Primary}"
                            CornerRadius="20"
                            HeightRequest="45"
                            FontAttributes="Bold"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Stats Cards -->
            <Grid ColumnDefinitions="*, *, *" ColumnSpacing="10">
                <Frame Grid.Column="0" Style="{StaticResource StrongerCard}" Padding="15">
                    <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                        <Label Text="86" TextColor="{StaticResource White}" FontSize="24" FontAttributes="Bold" HorizontalTextAlignment="Center"/>
                        <Label Text="Skupaj treningov" TextColor="{StaticResource Gray400}" FontSize="10" HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>
                </Frame>
                <Frame Grid.Column="1" Style="{StaticResource StrongerCard}" Padding="15">
                    <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                        <Label Text="425kg" TextColor="{StaticResource White}" FontSize="24" FontAttributes="Bold" HorizontalTextAlignment="Center"/>
                        <Label Text="Skupni volumen" TextColor="{StaticResource Gray400}" FontSize="10" HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>
                </Frame>
                <Frame Grid.Column="2" Style="{StaticResource StrongerCard}" Padding="15">
                    <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                        <Label Text="12" TextColor="{StaticResource White}" FontSize="24" FontAttributes="Bold" HorizontalTextAlignment="Center"/>
                        <Label Text="dni" TextColor="{StaticResource Gray400}" FontSize="10" HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>
                </Frame>
            </Grid>

            <!-- Cilji -->
            <Label Text="{Binding Lang.Goals}" TextColor="{StaticResource White}" FontSize="18" FontAttributes="Bold" Margin="0,10,0,0"/>
            <Frame Style="{StaticResource StrongerCard}" Padding="20">
                <VerticalStackLayout Spacing="15">
                    <VerticalStackLayout Spacing="8">
                        <Grid ColumnDefinitions="*, Auto">
                            <Label Grid.Column="0" Text="Tedenski treningi" TextColor="{StaticResource White}" FontSize="14"/>
                            <Label Grid.Column="1" Text="4/5" TextColor="{StaticResource Primary}" FontSize="14" FontAttributes="Bold"/>
                        </Grid>
                        <ProgressBar Progress="0.8" ProgressColor="{StaticResource Primary}" HeightRequest="8"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="8">
                        <Grid ColumnDefinitions="*, Auto">
                            <Label Grid.Column="0" Text="Ciljni bench press" TextColor="{StaticResource White}" FontSize="14"/>
                            <Label Grid.Column="1" Text="95/100 kg" TextColor="{StaticResource Primary}" FontSize="14" FontAttributes="Bold"/>
                        </Grid>
                        <ProgressBar Progress="0.95" ProgressColor="{StaticResource Primary}" HeightRequest="8"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="8">
                        <Grid ColumnDefinitions="*, Auto">
                            <Label Grid.Column="0" Text="Ciljni poÄep" TextColor="{StaticResource White}" FontSize="14"/>
                            <Label Grid.Column="1" Text="120/140 kg" TextColor="{StaticResource Primary}" FontSize="14" FontAttributes="Bold"/>
                        </Grid>
                        <ProgressBar Progress="0.86" ProgressColor="{StaticResource Primary}" HeightRequest="8"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Vadbeni program -->
            <Label Text="{Binding Lang.WorkoutProgram}" TextColor="{StaticResource White}" FontSize="18" FontAttributes="Bold" Margin="0,10,0,0"/>
            <Frame Style="{StaticResource StrongerCard}" Padding="0">
                <VerticalStackLayout Spacing="0">
                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="ðŸŽ¯" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.Goals}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <HorizontalStackLayout Grid.Column="2" Spacing="5">
                            <Label Text="{Binding VM.Profile.FitnessGoal}" TextColor="{StaticResource Gray400}" VerticalOptions="Center" FontSize="14"/>
                            <Label Text="â€º" TextColor="{StaticResource Gray400}" FontSize="18"/>
                        </HorizontalStackLayout>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding VM.SetFitnessGoalCommand}" />
                        </Grid.GestureRecognizers>
                    </Grid>
                    <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray600}" Margin="20,0"/>

                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="ðŸ‹ï¸" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.Equipment}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <HorizontalStackLayout Grid.Column="2" Spacing="5">
                            <Label Text="{Binding VM.Profile.EquipmentAvailable}" TextColor="{StaticResource Gray400}" VerticalOptions="Center" FontSize="14"/>
                            <Label Text="â€º" TextColor="{StaticResource Gray400}" FontSize="18"/>
                        </HorizontalStackLayout>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding VM.SetEquipmentCommand}" />
                        </Grid.GestureRecognizers>
                    </Grid>
                    <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray600}" Margin="20,0"/>

                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="ðŸ“Š" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.Level}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <HorizontalStackLayout Grid.Column="2" Spacing="5">
                            <Label Text="{Binding VM.Profile.ExperienceLevel}" TextColor="{StaticResource Gray400}" VerticalOptions="Center" FontSize="14"/>
                            <Label Text="â€º" TextColor="{StaticResource Gray400}" FontSize="18"/>
                        </HorizontalStackLayout>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding VM.SetExperienceLevelCommand}" />
                        </Grid.GestureRecognizers>
                    </Grid>
                    <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray600}" Margin="20,0"/>

                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="ðŸ“…" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.WorkoutsPerWeek}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <HorizontalStackLayout Grid.Column="2" Spacing="5">
                            <Label Text="{Binding VM.Profile.WorkoutDaysPerWeek, StringFormat='{0} dni'}" TextColor="{StaticResource Gray400}" VerticalOptions="Center" FontSize="14"/>
                            <Label Text="â€º" TextColor="{StaticResource Gray400}" FontSize="18"/>
                        </HorizontalStackLayout>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding VM.SetWorkoutDaysCommand}" />
                        </Grid.GestureRecognizers>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Prehrana -->
            <Label Text="{Binding Lang.Nutrition}" TextColor="{StaticResource White}" FontSize="18" FontAttributes="Bold" Margin="0,10,0,0"/>
            <Frame Style="{StaticResource StrongerCard}" Padding="20">
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding VM.AddNutritionCommand}" />
                </Frame.GestureRecognizers>
                <VerticalStackLayout Spacing="15">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="ðŸ¥—" FontSize="24"/>
                        <VerticalStackLayout Spacing="2">
                            <Label Text="{Binding Lang.DailyCalories}" TextColor="{StaticResource Gray400}" FontSize="12"/>
                            <Label TextColor="{StaticResource White}" FontSize="18" FontAttributes="Bold">
                                <Label.Text>
                                    <MultiBinding StringFormat="{}{0:F0} / {1:F0}">
                                        <Binding Path="VM.Profile.CurrentCalories" />
                                        <Binding Path="VM.Profile.TargetCalories" />
                                    </MultiBinding>
                                </Label.Text>
                            </Label>
                        </VerticalStackLayout>
                    </HorizontalStackLayout>

                    <Grid ColumnDefinitions="*, Auto" Margin="0,5,0,0">
                        <Label Grid.Column="0" Text="{Binding Lang.Protein}" TextColor="{StaticResource White}" FontSize="12"/>
                        <Label Grid.Column="1" TextColor="{StaticResource Gray400}" FontSize="12">
                            <Label.Text>
                                <MultiBinding StringFormat="{}{0:F0}g / {1:F0}g">
                                    <Binding Path="VM.Profile.CurrentProtein" />
                                    <Binding Path="VM.Profile.TargetProtein" />
                                </MultiBinding>
                            </Label.Text>
                        </Label>
                    </Grid>

                    <Grid ColumnDefinitions="*, Auto">
                        <Label Grid.Column="0" Text="{Binding Lang.Carbs}" TextColor="{StaticResource White}" FontSize="12"/>
                        <Label Grid.Column="1" TextColor="{StaticResource Gray400}" FontSize="12">
                            <Label.Text>
                                <MultiBinding StringFormat="{}{0:F0}g / {1:F0}g">
                                    <Binding Path="VM.Profile.CurrentCarbs" />
                                    <Binding Path="VM.Profile.TargetCarbs" />
                                </MultiBinding>
                            </Label.Text>
                        </Label>
                    </Grid>

                    <Grid ColumnDefinitions="*, Auto">
                        <Label Grid.Column="0" Text="{Binding Lang.Fats}" TextColor="{StaticResource White}" FontSize="12"/>
                        <Label Grid.Column="1" TextColor="{StaticResource Gray400}" FontSize="12">
                            <Label.Text>
                                <MultiBinding StringFormat="{}{0:F0}g / {1:F0}g">
                                    <Binding Path="VM.Profile.CurrentFats" />
                                    <Binding Path="VM.Profile.TargetFats" />
                                </MultiBinding>
                            </Label.Text>
                        </Label>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Nastavitve -->
            <Label Text="{Binding Lang.Settings}" TextColor="{StaticResource White}" FontSize="18" FontAttributes="Bold" Margin="0,10,0,0"/>
            <Frame Style="{StaticResource StrongerCard}" Padding="0">
                <VerticalStackLayout Spacing="0">
                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="ðŸŒ" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.Language}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <HorizontalStackLayout Grid.Column="2" Spacing="5">
                            <Label Text="{Binding VM.CurrentLanguage}" TextColor="{StaticResource Gray400}" VerticalOptions="Center" FontSize="14"/>
                            <Label Text="â€º" TextColor="{StaticResource Gray400}" FontSize="18"/>
                        </HorizontalStackLayout>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding VM.ChangeLanguageCommand}" />
                        </Grid.GestureRecognizers>
                    </Grid>
                    <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray600}" Margin="20,0"/>

                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="ðŸ””" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.Notifications}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <Switch Grid.Column="2" IsToggled="True" OnColor="{StaticResource Primary}"/>
                    </Grid>
                    <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray600}" Margin="20,0"/>

                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="ðŸŒ™" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.DarkMode}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <Switch Grid.Column="2" IsToggled="True" OnColor="{StaticResource Primary}"/>
                    </Grid>
                    <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray600}" Margin="20,0"/>

                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="ðŸ†" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.Achievements}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <Label Grid.Column="2" Text="â€º" TextColor="{StaticResource Gray400}" FontSize="18"/>
                    </Grid>
                    <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray600}" Margin="20,0"/>

                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="âš™" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.GoalSettings}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <Label Grid.Column="2" Text="â€º" TextColor="{StaticResource Gray400}" FontSize="18"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Podpora -->
            <Label Text="{Binding Lang.Support}" TextColor="{StaticResource White}" FontSize="18" FontAttributes="Bold" Margin="0,10,0,0"/>
            <Frame Style="{StaticResource StrongerCard}" Padding="0">
                <VerticalStackLayout Spacing="0">
                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="â“" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.Help}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <Label Grid.Column="2" Text="â€º" TextColor="{StaticResource Gray400}" FontSize="18"/>
                    </Grid>
                    <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray600}" Margin="20,0"/>

                    <Grid ColumnDefinitions="Auto, *, Auto" Padding="20,15" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="â„¹" FontSize="20"/>
                        <Label Grid.Column="1" Text="{Binding Lang.About}" TextColor="{StaticResource White}" VerticalOptions="Center"/>
                        <Label Grid.Column="2" Text="â€º" TextColor="{StaticResource Gray400}" FontSize="18"/>
                    </Grid>
                    <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray600}" Margin="20,0"/>

                    <Grid ColumnDefinitions="*, Auto" Padding="20,15">
                        <Label Grid.Column="0" Text="{Binding Lang.Logout}" TextColor="{StaticResource Danger}" VerticalOptions="Center"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <BoxView HeightRequest="20"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
